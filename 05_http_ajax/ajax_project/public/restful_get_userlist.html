<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>restful get 不带参数查询</title>
</head>
<script>
	function get_all_data() {
		//1.创建对象
		var xhr = new XMLHttpRequest();
		//2.监听收到响应
		xhr.onreadystatechange = function () {
			if(xhr.status == 200 && xhr.readyState == 4){
			    var reslut = xhr.responseText;
                // console.log(reslut)
				var arr = JSON.parse(reslut)
                // console.log("" + arr[0].uname)
                // div_id1.innerHTML = reslut;
                show_all(arr);
			}
        }
        //3.创建请求
		var url = "http://localhost:8080/ajax/restful_userlist"
		xhr.open("get",url,true);
		//4.发送请求
		xhr.send();
    }
    function show_all(data) {
	    var htmlString = `<table border="1" cellpadding="1" cellspacing="0" align="center" bordercolor ="red">
				<tr>
					<th>编号</th>
					<th>用户名</th>
					<th>密码</th>
					<th>邮箱</th>
					<th>电话</th>
					<th>姓名</th>
					<th>性别</th>
				</tr>`;
        for (let i = 0; i < data.length; i++) {
            var sex =" ";
            if(data[i].gender == 0){
                sex ="女"
            }else if(data[i].gender == 1){
                sex ="男"
            }
            htmlString += `
                <tr>
					<td align="center">${data[i].uid}</td>
					<td>${data[i].uname}</td>
					<td>${data[i].upwd}</td>
					<td>${data[i].email}</td>
					<td>${data[i].phone}</td>
					<td align="center">${data[i].user_name}</td>
					<td>${sex}</td>
				</tr>`
        }
	    
        htmlString += "</table>";

        div_id1.innerHTML = htmlString;
    }
    
</script>
<body onload="get_all_data()">

<div id="div_id1" ></div>


</body>
</html>