<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
	      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>ajax_test</title>
	
	<script>
		function get_msg() {
            //1.创建异步对象
			// (1)异步对象XMLHttpRequst 不兼容IE8
			// var xhr = new XMLHttpRequest();
            // console.log(xhr)
			// (2)ie8以下的创建方式
			// var xhr = new ActiveXObject("Microsoft.XMLHttp");
            // console.log(xhr)
			// (3)兼容ie8以上 和ie8以下的写法
            console.log("ie8以上浏览器有这个属性",window.XMLHttpRequest)
			var xhr;
			if(window.XMLHttpRequest){
                xhr = new XMLHttpRequest();
			}else {
                xhr = new ActiveXObject("Microsoft.XMLHttp");
			}
            console.log(xhr)
            console.log("readystate:",xhr.readyState)
            //4.接收响应,创建监听
            xhr.onreadystatechange = function () {
                // 4步骤放在2,3步骤上 是为了 监听readyState == 1
                console.log("readystate:",xhr.readyState)
                if(xhr.readyState == 4 && xhr.status == 200){
                    var result = xhr.responseText;
                    console.log(result)
                }
            }
			//2.创建请求,打开连接
			xhr.open("get", "http://localhost:8080/ajax/test", true)

			//3.发送请求
			xhr.send();
            // console.log("readystate:",xhr.readyState)
			
        }
	</script>
	
</head>
<body>

<button onclick="get_msg()">ajax</button>

</body>
</html>