<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>restful_post_reg</title>
</head>
<script>
	function reg() {
        if(!uname.value || !upwd.value){
            alert("用户名或密码不能为空");
            return;
        }
        if(upwd.value != upwd2.value){
            // alert("两次密码不一样");
            // return;
        }
        //1.创建ajax异步对象
        var xhr = new XMLHttpRequest();
        //4.监听响应
        xhr.onreadystatechange = function () {
            if(xhr.status == 200 && xhr.readyState ==4){
                var result = xhr.responseText;
                console.log(result);
                if(result == 1){
                    alert("注册成功")
                }else {
                    alert("注册失败")
                }
            }
        }
        //2. 创建请求
        var url = "http://localhost:8080/ajax/restful_post_reg";
        xhr.open("post",url, true);
        //2.1设置请求头
        xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        //3.发送请求
        //post 创建 请求主体

		var _gender = -1;
		if(man.checked){
            _gender = 1;
		}else if(woman.checked){
            _gender = 0;
		}
        var formdata = "uname="+uname.value +"&upwd=" + upwd.value +
		        "&email="+email.value + "&phone="+phone.phone +
		        "&user_name=" +user_name.value + "&gender=" +_gender;
		
        console.log("formdata" ,formdata)
        xhr.send(formdata);
    }
</script>
<body>
<fieldset>
	<legend>注册用户</legend>
	
	<p>
		用户&emsp;&emsp;<input type="text" id="uname">
	</p>
	<p>
		密码&emsp;&emsp;<input type="text" id="upwd">
	</p>
	<p>
		密码确认<input type="text" id="upwd2">
	</p>
	<p>
		邮箱&emsp;&emsp;<input type="text" id="email">
	</p>
	<p>
		电话&emsp;&emsp;<input type="text" id="phone">
	</p>
	<p>
		姓名&emsp;&emsp;<input type="text" id="user_name">
	</p>
	<p>
		性别
		<input type="radio" name="gender" id="man" value="1" checked>
		<label for="man">男</label>
		<input type="radio" name="gender" id="woman" value="0">
		<label for="woman">女</label>
		<input type="radio" name="gender" id="none" value="-1">
		<label for="none">保密</label>
		
	</p>
	<button onclick="reg()">注册</button>
	
</fieldset>



</body>
</html>