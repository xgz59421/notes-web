<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>restful_put_update</title>
</head>
<script>
	function update_user() {
	    if(!uid.value){
	        alert("用户id不能为空")
	        return
	    }
        //1.创建ajax异步对象
        var xhr = new XMLHttpRequest();
        //4.监听响应
        xhr.onreadystatechange = function () {
            if(xhr.status == 200 && xhr.readyState ==4){
                var result = xhr.responseText;
                console.log(result);
                if(result == 1){
                    alert("修改成功")
                }else {
                    alert("修改失败")
                }
            }
        }
        //2. 创建请求
        var url = "http://localhost:8080/ajax/restful_update";
        xhr.open("put",url, true);
        //2.1设置请求头
        xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        //3.发送请求
        //post 创建 请求主体

		var _gender = -1;
		if(man.checked){
            _gender = 1;
		}else if(woman.checked){
            _gender = 0;
		}
        var formdata = "uid="+uid.value +
		        "&email="+email.value + "&phone="+phone.phone +
		        "&user_name=" +user_name.value + "&gender=" +_gender;
		
        console.log("formdata" ,formdata)
        xhr.send(formdata);
    }
</script>
<body>
<fieldset>
	<legend>修改用户</legend>
	
	<p>
		ID &emsp;<input type="text" id="uid">
	</p>
	<p>
		邮箱 <input type="text" id="email">
	</p>
	<p>
		电话 <input type="text" id="phone">
	</p>
	<p>
		姓名 <input type="text" id="user_name">
	</p>
	<p>
		性别
		<input type="radio" name="gender" id="man" value="1" checked>
		<label for="man">男</label>
		<input type="radio" name="gender" id="woman" value="0">
		<label for="woman">女</label>
		<input type="radio" name="gender" id="none" value="-1">
		<label for="none">保密</label>
		
	</p>
	<button onclick="update_user()">修改</button>
	
</fieldset>



</body>
</html>